/*  The MIT License (MIT)
**  
**  Copyright (c) 2014 Chad Seaman
**  
**  http://github.com/chadillac/MoshPit.js
**  
**  Permission is hereby granted, free of charge, to any person obtaining a copy
**  of this software and associated documentation files (the "Software"), to deal
**  in the Software without restriction, including without limitation the rights
**  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
**  copies of the Software, and to permit persons to whom the Software is
**  furnished to do so, subject to the following conditions:
**  
**  The above copyright notice and this permission notice shall be included in all
**  copies or substantial portions of the Software.
**  
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
**  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
**  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
**  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
**  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
**  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
**  SOFTWARE.
*/
(function(){(function(e){"use strict";var t,n;var s={shown:{prefix:"",postfix:"_shown"},state:{prefix:"state_",postfix:""}};var i={};var a={mobile:{min:0,max:400},tablet:{min:401,max:900},desktop:{min:901,max:1200},desktop_wide:{min:1201,max:99999999}};var o={get_namespace:function(e){var t=false;if(e instanceof jQuery){t=e.attr("id")}else if(typeof e=="string"){if(e.indexOf("#")==0){e=e.substr(1)}t=e}return t},csv_to_class:function(t,n,s){var n=typeof n!="undefined"&&n.length?" "+n:"";var s=typeof s!="undefined"&&s.length?s+" ":"";t=t.replace(" ","");t=t.split(",").join("[post],").split(",").join("[pre]");t=t.replace("[post]",s).replace("[pre]",n);t=n+t+s;return e.trim(t)},shown_chain:function(e){return o.csv_to_class(e,s.shown.prefix,s.shown.postfix)},state_chain:function(e){return o.csv_to_class(e,s.state.prefix,s.state.postfix)},get_sizes_chain:function(){if(this.sizes_chain){return this.sizes_chain}var t="";for(var n in a){if(a.hasOwnProperty(n)){t+=n+" "}}this.sizes_chain=e.trim(t);return this.sizes_chain},get_size:function(){var t=e(window).width();for(var n in a){var s=a[n].min;var i=a[n].max;if(a.hasOwnProperty(n)){if(t>=s&&t<=i){return n}}}},is_shown:function(e){return n.hasClass(o.shown_chain(e))},is_state:function(e){return t.hasClass(s.state.prefix+e+s.state.postfix)}};var r={hide:function(e){n.removeClass(o.shown_chain(e))},show:function(e){n.addClass(o.shown_chain(e))},toggle:function(t){t=t.split(",");for(var n=0,s=t.length;n<s;n++){var i=e.trim(t[n]);if(o.is_shown(i)){r.hide(i)}else{r.show(i)}}},marionette_hide:function(){r.hide(o.get_namespace(this.el))},marionette_show:function(){r.show(o.get_namespace(this.el))},add_state:function(e){t.addClass("state_"+e)},del_state:function(e){t.removeClass("state_"+e)},toggle_state:function(t){t=t.split(",");for(var n=0,s=t.length;n<s;n++){var i=e.trim(t[n]);if(o.is_state(i)){r.del_state(i)}else{r.add_state(i)}}},resize:function(e,n){clearTimeout(i.resize);if(n){t.removeClass(o.get_sizes_chain()).addClass(o.get_size());return}i.resize=setTimeout(r.resize,102,e,true)},click:function(t){var n=e(t.currentTarget);var s=n.data("moshpit");var i=n.data("mosher");if(typeof r[s]!="undefined"){r[s](i);t.preventDefault()}}};var f={moshers:{},jq_funcs:false,add_marionette:function(t){t.on("show",r.marionette_show);t.on("close",r.marionette_hide);f.add_jquery.call(f,e(t.el))},del_marionette:function(t){t.off("show",r.marionette_show);t.off("close",r.marionette_hide);f.del_jquery.call(f,e(t.el))},add_jquery:function(t){var n=o.get_namespace(t);if(f.jq_funcs===false){f.jq_funcs={};f.jq_funcs.show=e.fn.show;e.fn.show=function(){var t=o.get_namespace(e(this));if(f.moshers[t]){r.show(t)}else{console.log(f);f.jq_funcs.show.apply(this,arguments)}};f.jq_funcs.hide=e.fn.hide;e.fn.hide=function(){var t=o.get_namespace(e(this));if(f.moshers[t]){r.hide(t)}else{f.jq_funcs.show.apply(this,arguments)}};f.jq_funcs.toggle=e.fn.toggle;e.fn.toggle=function(){var t=o.get_namespace(e(this));if(f.moshers[t]){r.toggle(t)}else{f.jq_funcs.toggle.apply(this,arguments)}}}f.moshers[n]=true},del_jquery:function(e){var t=o.get_namespace(e);f.moshers[t]=false;r.hide(t)}};window.MoshPit={join:function(t){if(typeof t=="string"){t=e("#"+o.get_namespace(t));if(t.length){f.add_jquery.call(f,t)}}else if(typeof t=="object"){if(t instanceof jQuery){f.add_jquery.call(f,t)}else if(t instanceof Marionette.Region||t instanceof Marionette.View||t instanceof Marionette.ItemView||t instanceof Marionette.Layout){f.add_marionette.call(f,t)}}},leave:function(t){if(typeof t=="string"){t=e("#"+o.get_namespace(t));if(t.length){f.del_jquery.call(f,t)}}else if(typeof t=="object"){if(t instanceof jQuery){f.del_jquery.call(f,t)}else if(t instanceof Marionette.Region||t instanceof Marionette.View||t instanceof Marionette.ItemView||t instanceof Marionette.Layout){f.del_marionette.call(f,t)}}},show:function(e){var t=o.get_namespace(e);r.show(t)},hide:function(e){var t=o.get_namespace(e);r.hide(t)},toggle:function(e){var t=o.get_namespace(e);r.toggle(t)},add_state:function(e){r.add_state(e)},remove_state:function(e){r.del_state(e)},is_shown:function(e){var t=o.get_namespace(e);return o.is_shown(t)}};e(function(){r.resize();t=e("html");n=e("body");e(window).on("resize",r.resize);e(document).on("click","[data-moshpit]",r.click)})})(jQuery)})();